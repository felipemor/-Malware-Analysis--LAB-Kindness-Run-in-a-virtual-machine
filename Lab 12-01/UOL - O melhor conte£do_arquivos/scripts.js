var homeUOL = {

sw : null,
setPositionBanners : null,
userAgent : navigator.userAgent ? navigator.userAgent.toString().toLowerCase() : '',

init : function(){
	window.htmlElement = d.getElementsByTagName('html')[0];
	homeUOL.setWidthClass();
	homeUOL.detectHandheld();

	this.tempoDEShowPos = 100;
	if(/msie.(5|6|7)/.test(this.userAgent) === true)
		this.tempoDEShowPos = 1000;
	
},

cabecalhoAtualizar : {
	init : function(){
		this.form = homeUOL.gId('cabecalhoAtualizarHome');
		this.chkBox = homeUOL.gId('cabecalhoAtualizarHomeCheckbox');
		this.strong = this.form.getElementsByTagName('strong') && this.form.getElementsByTagName('strong')[0];
		this.default_label = this.strong ? this.strong.innerHTML : '';
		this.bind();
	},
	switchReload : function(){
		if(jsRefresh == null){
			this.form.className = "cabecalhoAtualizarHome cabecalhoAtualizarHomeInactive";
			this.chkBox.checked = true;
			setJsRefresh();
			homeUOL.contarClick('reloadPlay');
			if(uol_sc && uol_sc.tl)
				uol_sc.tl(true,"o","home2011-reloadPlay");
			if(this.strong)
				this.strong.innerHTML = this.default_label;
		}else{
			this.form.className = "cabecalhoAtualizarHome";
			this.chkBox.checked = false;
			clearTimeout(jsRefresh);
			jsRefresh = null;
			homeUOL.contarClick('reloadPlay');
			if(uol_sc && uol_sc.tl)
				uol_sc.tl(true,"o","home2011-reloadStop");
			if(this.strong)
				this.strong.innerHTML = 'Atualizar sempre';
		}
	},
	bind : function(){
		homeUOL.events.add(this.form,'click',function(){homeUOL.cabecalhoAtualizar.switchReload()})
	}
},


scripts : {
	elements : {},
	runCallbacks : function(e){
		while(e.callbacks.length > 0)
			e.callbacks.shift()();
	},
	load : function(args){
		var url = args.url;
		var charset = args.charset || "UTF-8";
		var refresh = args.refresh || false;
		var scope = args.scope || window;
		var check = typeof args.check == "function" ? args.check : function(){return true};
		var callback = (typeof args.callback == 'function' ? function(){args.callback.call(scope)} : null)
		var id = url.replace(/\W+/g,'');

		if(this.elements[id] && refresh)
			delete this.elements[id];

		if(!this.elements[id]){
			this.elements[id] = {isLoaded : false, check:check, callbacks : []};
			
			if(callback)
				this.elements[id].callbacks.push(callback);
			
			var HTML_SCRIPT = document.createElement("script");
			var HEAD = document.getElementsByTagName("head")[0];
			HTML_SCRIPT.onload = HTML_SCRIPT.onreadystatechange = (function(s, e, l){
				return function(){
					if (!s.readyState || s.readyState == "loaded" || s.readyState == "complete") {
						e.isLoaded = true;
						if(e.check())
							l.runCallbacks(e);
						HEAD.removeChild(s);
						s.onload = s.onreadystatechange = null;
					}
				}
			})(HTML_SCRIPT, this.elements[id], homeUOL.scripts);
		
			HTML_SCRIPT.type    = 'text/javascript';
			HTML_SCRIPT.async   = true;
			HTML_SCRIPT.charset = charset;
			HTML_SCRIPT.src			= url;
	
			HEAD.insertBefore(HTML_SCRIPT, HEAD.firstChild);
			
			return this.elements[id];
		}else if(!this.elements[id].isLoaded && callback)
			this.elements[id].callbacks.push(callback)
		else if(this.elements[id].isLoaded && callback)
			callback();

	}
},

gId : function(id){
	return d.getElementById(id);
},

rodapeScripts : function(){
	homeUOL.indexer = [];
	homeUOL.scripts.load({url:"http://jsuol.com/c/jquery/jquery.js",callback:function(){

		//modulos que devem ser indexados
		var H = jQuery("#modulos .modulo > h1,\
			#modulos .modulo > h2,\
			#modulos .modulo > h4,\
			.modulo .sub li a,\
			#modulos .modulo div[class*=foto] h2,\
			.moduloRotativo p,\
			.fixoFotos p,\
			#corpoEsquerdaFotos li,\
			#corpoDireita .box li,\
			.verticalSubModulos .moduloVideos li");

		//tratamento dos modulos indexados
		jQuery.each(H,function(){
			var e;

			//elementos que não seguem o padrao do css .modulo
			if(jQuery(this).find('img').length > 0 && jQuery(this).parents('#corpoEsquerdaFotos, #corpoDireita, .moduloVideos').length > 0){
				var tmp = jQuery(this).clone()[0];
				var src = jQuery.trim(jQuery(tmp).find('img').attr('src'));
				var img = jQuery(tmp).find('img').attr('src',src).parents('a');
				e = jQuery('<div><div><h2></h2></div></div>').prepend(img)[0];
				jQuery(e).find('h2').append(jQuery(tmp).find('p a'));
				if(jQuery(tmp).find('h2 a').length > 0)
					jQuery(e).find('h2 a').prepend('<strong>'+jQuery(tmp).find('h2 a').html()+'</strong>');
					
			}
			//modulos com padrao css .modulo
			else
				e = jQuery(this).parents("div[class*=foto], .modulo, .moduloRotativo li, .sub li, .fixoFotos li ").clone()[0];

			//tratamento especial para modulos do tipo rotativo e fixoFotos
			if(jQuery(this).parents(".moduloRotativo, .fixoFotos").length > 0)
				jQuery(e).html("<div class='rotativoSuggest'>" + jQuery(e).find('.texto p').html() + "</div>").find('a').prepend("<img src='" + jQuery(this).parents('li').find('img').attr('src') + "' border='0' />");

			//tratamento especial modulo foto i300x100
			if(jQuery(this).parents(".i300x100").length > 0)
				jQuery(e).html("<div class='i300x100'>" + jQuery(e).html() + "</div>");

			//se for subchamada
			if(jQuery(this).parents(".sub").length > 0)
				jQuery(e).find('a').addClass('subChamada');
				
			//remover subchamadas dos modulos indexados
			jQuery(e).find('ul.sub').remove();
			homeUOL.indexer.push({txt:jQuery(this).text(),element:e});
		})

	}});
	this.setJsRefresh();
	this.loadFBLike();

	if(/msie/.test(this.userAgent) === true) {
		setTimeout(function() {
				homeUOL.paginaInicialIEBar();
		}, 2000);
	}
},

setJsRefresh : function(){
	jsRefresh = setTimeout(function(){
				window.location.href = window.location.href;
		},250000);
},

loadFBLike : function() {
	var fblike = homeUOL.gId('facebookLike');
	if(fblike) {
		fblike.innerHTML = '<iframe src="//www.facebook.com/plugins/like.php?href=http%3A%2F%2Fwww.facebook.com%2FUOL&amp;send=false&amp;layout=button_count&amp;width=102&amp;show_faces=false&amp;action=like&amp;colorscheme=light&amp;font=arial&amp;height=21&amp;locale=pt_BR" scrolling="no" frameborder="0" allowTransparency="true"></iframe>';
	}
},

setWidthClass : function(){
	this.sw = screen.width;
	if(this.sw >= 1280 || /ipad/.test(this.userAgent) === true)
		htmlElement.className += ' w1280'
	else
		htmlElement.className += ' w1024'
},

detectHandheld : function(){
	if(this.userAgent) {
		//var userAgent = navigator.userAgent.toLowerCase();
		if(/mobile|ipod|android.+mobile/.test(this.userAgent) && /ipad/.test(this.userAgent) === false) {
			htmlElement.className += ' handheld'
		}
	}
},

events : {
  preventDefault : function(e){
    if(e.preventDefault) e.preventDefault();
    else e.returnValue = false; 
  }, 
  add : function(elem,event,fun){
    if(d.attachEvent)
      elem.attachEvent('on'+event,fun);
    else if(d.addEventListener)
      elem.addEventListener(event,fun,true);
  },
	del : function(elem,event,fun) {
    if(d.detachEvent)
      elem.detachEvent('on'+event,fun);
    else if(d.removeEventListener)
      elem.removeEventListener(event,fun,true);
	}
},

contarClick : function(id, callback, extra){
	var imgClick = d.createElement("img");
	imgClick.id = "clickUOL" + id;
	d.getElementsByTagName("body")[0].appendChild(imgClick);
	imgClick.src = "http://click.uol.com.br/?rf=home2011-" + id + "&u=http://h.imguol.com/h3/x.gif"+ (extra ? '?' + extra : '');
	this.events.add(imgClick, 'load', function(){
		if(typeof callback == "function")
			callback();
		d.getElementsByTagName("body")[0].removeChild(imgClick);
	})
},

submitEmpregosForm : function(){
	var formEmprego = d.formEmpregos;
	if (formEmprego.sltEmpregos.value!=""){
		this.contarClick('empregos-caixa',function(){
			var url = "http://clicklogger.rm.uol.com.br/?prd=21&grp=src:10;size:6;chn:0;creative:caixadebuscahomeuol;thm:" + 
			formEmprego.sltEmpregos.options[formEmprego.sltEmpregos.selectedIndex].id + 
			"&msr=Cliques%20de%20Origem:1&oper=7&redir=http://empregocerto.uol.com.br/search/jobs.html?workingArea=" + 
			formEmprego.sltEmpregos.value;
			clickCounterOmniture("header-empregocerto-drop",url);
			d.location=url;
		});
	}
	return false;
},

submitCursosOnlineForm : function(){
	var formCursos = d.formCursosOnline;
	if (formCursos.sltCursosOnline.value!=""){
		this.contarClick('cursosonline-caixa',function(){
			var url = "http://clicklogger.rm.uol.com.br/?prd=61&grp=src:5;chn:0;size:19;creative:combo_home_uol&msr=Cliques%20de%20Origem:1&oper=7&redir=http://cursosonline.uol.com.br/" + 
			formCursos.sltCursosOnline.options[formCursos.sltCursosOnline.selectedIndex].value + 
			".aspx";
			clickCounterOmniture("header-cursosonline-drop",url);
			d.location=url;
		});
	}
	return false;
},

formBusca : {
	_onFocus : function(e,t){
		if(!t.getAttribute('defaultValue'))
			t.setAttribute('defaultValue',t.value);
		if(t.value == t.getAttribute('defaultValue'))
			t.value = '';
	},
	_onBlur : function(e,t){
		if(t.value == false && t.getAttribute('defaultValue'))
			t.value = t.getAttribute('defaultValue');
	},
	buscaEmBranco : function(q,url,p){
		if(p && p.name) {
				var origem = {
						"formBuscaRadioUOL" : "radio",
						"formBuscaReceitas" : "receitas",
						"formBuscaVideos"   : "videos",
						"formBuscaJogos"    : "jogos",
						"formBuscaShop"     : "shopping",
						"formBusca"         : "uol busca"
				}
				uol_sc.tl(true,"o","caixa de busca-"+(origem[p.name]||"nao-identificado")+"-busca vazia");
		}
		if (!q.getAttribute('defaultvalue') || q.value == q.getAttribute('defaultvalue')){
			if(url)
				location = url;
			return true;
		}
		return false;
	},
	_onSubmit : function(t){
		var form = t;

		//Define clickuol para formularios
		var refClickUOL = null;
		if(t.name=="formEmail")
			refClickUOL = "header-mail-entrar";
		else if(t.name=="formBusca")
			refClickUOL = "header-buscar";
		else if(t.name=="formBuscaShop")
			refClickUOL = "horizontal-fixo-shopping-buscar";
		else if(t.name=="formBuscaJogos")
			refClickUOL = "horizontal-fixo-jogos-buscar";
		else if(t.name=="formBuscaRadioUOL")
			refClickUOL = "horizontal-fixo-radio-buscar";
		else if(t.name=="formBuscaReceitas")
			refClickUOL = "horizontal-fixo-receitas-buscar";
		else if(t.name=="formBuscaVideos")
			refClickUOL = "horizontal-vertical-videos-buscar";
		else
			refClickUOL = t.name;
		
		homeUOL.contarClick(refClickUOL,function(){
			if(t.name == 'formBuscaRadioUOL'){
				if(homeUOL.formBusca.buscaEmBranco(t.q,'http://radio.uol.com.br/',t))
					return;
				omnitureSearchTerm(t.q.value, refClickUOL);
				location = t.action + encodeURI(t.q.value);
				return;
			}else if(t.name == 'formBuscaReceitas'){
				if(homeUOL.formBusca.buscaEmBranco(t.r,'http://receitas.uol.com.br/',t))
					return;
				omnitureSearchTerm(t.r.value, refClickUOL);
				location = t.action + '?r=' + escape(t.r.value);
				return;
			}else if(t.name == 'formBuscaVideos'){
				if(homeUOL.formBusca.buscaEmBranco(t.q, 'http://tvuol.uol.com.br/',t))
					return;
				omnitureSearchTerm(t.q.value, refClickUOL);
				location = 'http://tvuol.uol.com.br/videos.htm?q='+t.q.value.replace(/ /g,'+');
				return;
			}else if(t.name == 'formBuscaJogos'){
				if(homeUOL.formBusca.buscaEmBranco(t.keywords,'http://jogosonline.uol.com.br/',t))
					return;
				omnitureSearchTerm(t.keywords.value, refClickUOL);
			}else if(t.name == 'formBuscaEmpregoCerto'){
				omnitureSearchTerm(t.keyword.value, refClickUOL);
				if(homeUOL.formBusca.buscaEmBranco(t.keyword))
					t.keyword.value = "";
			}else if(t.name == 'formBuscaMegastore'){
				omnitureSearchTerm(t.q.value, refClickUOL);
				if(homeUOL.formBusca.buscaEmBranco(t.q))
					t.q.value = "";
			}else if(t.name == 'formBuscaCursosOnline'){
				omnitureSearchTerm(t.Titulo.value, refClickUOL);
				if(homeUOL.formBusca.buscaEmBranco(t.Titulo))
					t.Titulo.value = "";
			}
			else if(t.name == 'formBusca' || t.name == 'formBuscaShop'){
				if(t.name == 'formBuscaShop' && homeUOL.formBusca.buscaEmBranco(t.q,'http://shopping.uol.com.br',t))
					return;

				if(t.name == 'formBusca' && homeUOL.formBusca.buscaEmBranco(t.q, 'http://busca.uol.com.br/',t))
					return;

				omnitureSearchTerm(t.q.value, refClickUOL);

				// busca web, image e uol aceitam utf-8
				var is_dic = /^http:\/\/dic/.test(t.action);

				if(is_dic === false) {
					homeUOL.gId('formBusca').removeAttribute('accept-charset')
				}

				var escaped_term = t.name == 'formBusca' && is_dic === false ? encodeURIComponent(t.q.value) : escape(t.q.value);

				if(t.action.match(/\{palavra\}/)) {
					location = t.action.replace(/\{palavra\}/,escaped_term)
				}
				else {
					location = t.action + '?ref=homeuol&ad=on&q=' + escaped_term;
				}
				return;
			}else
				clickCounterOmniture(refClickUOL);
			form.onsubmit = function(){return true;};
			form.submit();
		});
		return false;
	}
},

suggestBuscaUOL : {
	form : null,
	input : null,
	fieldset : null,
	suggest : null,
	selecionado : -1,
	init : function(){
		this.form = homeUOL.gId('formBusca');
		this.input = homeUOL.gId('formBusca_q');
		this.fieldset = this.form.getElementsByTagName('fieldset')[0];
		this.binds();
	},
	show : function(){
		var termo = this.input.value.replace(/\</g,'&lt;').replace(/\>/g,'&gt;');
		if(!this.suggest){
			this.suggest = d.createElement('div');
			this.suggest.className = 'suggest';
			this.fieldset.insertBefore(this.suggest,this.fieldset.firstChild);
		}else
			this.suggest.style.display='block';
		this.suggest.innerHTML = '<ol>\
			<li><a metricOff="true" href="http://busca.uol.com.br/web/">Buscar <strong metricOff="true">\''+termo+'\'</strong> na Web</a></li>\
			<li><a metricOff="true" href="http://busca.uol.com.br/imagem/">Buscar <strong metricOff="true">\''+termo+'\'</strong> em Imagens</a></li>\
			<li><a metricOff="true" href="http://busca.uol.com.br/uol/">Buscar <strong metricOff="true">\''+termo+'\'</strong> no UOL</a></li>\
			<li><a metricOff="true" href="http://dic.busca.uol.com.br/result.html?group=0&t=10&q={palavra}">Buscar <strong metricOff="true">\''+termo+'\'</strong> em Dicionários</a></li>\
			</ol>';
		
		var li = this.suggest.getElementsByTagName('li');
		
		// procura por modulos
		if(termo.replace(/^\s+|\s+$/g,'').length > 2)
		for(a in homeUOL.indexer){
			var r = new RegExp(""+termo+"","gi");
			if(homeUOL.indexer[a].element && homeUOL.indexer[a].txt.match(r)){
				var liN = document.createElement('li');
				liN.innerHTML = '<div class="modulo">' + homeUOL.indexer[a].element.innerHTML + '</div>';
				this.suggest.getElementsByTagName('ol')[0].appendChild(liN);
				//break;
			}
		}
		
		for(var i=0;i<li.length;i++){
			homeUOL.events.add(li[i],'mouseover',(function(index){
				return function(){
					homeUOL.suggestBuscaUOL.selecionado = index;
					homeUOL.suggestBuscaUOL.selecionarItem();
				}				
			})(i))
			homeUOL.events.add(li[i],'click',function(){
				homeUOL.formBusca._onSubmit(homeUOL.suggestBuscaUOL.form);
				//homeUOL.suggestBuscaUOL.form.onsubmit();
			})
			if(li[i].getElementsByTagName('a')[0])
			homeUOL.events.add(li[i].getElementsByTagName('a')[0],'click',function(e){
				homeUOL.events.preventDefault(e);
			})
		}
	},
	removerSuggest : function(){
		setTimeout(function(){
			if(homeUOL.suggestBuscaUOL.suggest)
				homeUOL.suggestBuscaUOL.suggest.style.display='none';
			homeUOL.suggestBuscaUOL.selecionado = -1;
		},200)
	},
	selecionarItem : function(){
		var LI = this.suggest.getElementsByTagName('li');
		for(var i=0; i<LI.length; i++)
			if(i==this.selecionado)
				LI[i].className = 'sel'
			else
				LI[i].className = ''
		if(this.suggest.getElementsByTagName('li')[this.selecionado].getElementsByTagName('a').length > 0)
			this.form.action = this.suggest.getElementsByTagName('li')[this.selecionado].getElementsByTagName('a')[0].getAttribute('href')
	},
	navegacao : function(keyCode){
		if(this.suggest){
			this.suggest.style.display='block';
			var LI = this.suggest.getElementsByTagName('li');
			var navTo = (keyCode == 38 ? -1 : 1 )
			this.selecionado += navTo;
			this.selecionado = this.selecionado % LI.length;
			if(this.selecionado < 0)
				this.selecionado = LI.length-1
			this.selecionarItem();
		}else
			this.show();
	},
	binds : function(){
		
		homeUOL.events.add(this.input, 'keyup', function(e){
			if(homeUOL.suggestBuscaUOL.input.value){
				// tecla enter precionada
				//if(e.keyCode == 13 && homeUOL.suggestBuscaUOL.input.value){
				//}
				// Navegação com setas para cima e para baixo
				if(e.keyCode == 38 || e.keyCode == 40)
					homeUOL.suggestBuscaUOL.navegacao(e.keyCode);
				// Tecla ESC remove o suggest
				else if(e.keyCode == 27)
					homeUOL.suggestBuscaUOL.removerSuggest();
				//Montar modulo suggest
				else{
					homeUOL.suggestBuscaUOL.show();
				}
			}
		});

		homeUOL.events.add(this.input, 'blur', function(e){
			homeUOL.formBusca._onBlur(e,homeUOL.suggestBuscaUOL.input);
			homeUOL.suggestBuscaUOL.removerSuggest();
		});

		homeUOL.events.add(this.input, 'focus', function(e){
			homeUOL.formBusca._onFocus(e,homeUOL.suggestBuscaUOL.input);
		});

	}
},

cabecalhoTempo : {
	selecionado : null,
	wrapper : null,
	cidadesUL : null,
	cidades : null,
	botao : null,
	timerFechar : null,
	init : function(){
		// tenta obter o cookie antigo
		var cookie_antigo = homeUOL.getCookie('cabecalhoTempo');
		if(cookie_antigo) {
			// remove o cookie antigo
			homeUOL.setCookie('cabecalhoTempo', '', -1000);
			
			// define o novo cookie
			homeUOL.geoIp.definecaoManualPorUF('SA', 'BR', cookie_antigo);
		}

		// Verifica se tem algum cookie definido. Dá preferência para
		// o cookie setado pelo usuário. GeoIP é a segunda opção.
		this.selecionado = homeUOL.getCookie('geoloc');

		// se não encontrou nenhum cookie, obtém o geoIP
		if(!this.selecionado) {
			homeUOL.geoIp.request({ 'func' : homeUOL.cabecalhoTempo.init, 'scope' : this });

			return false;
		}

		// trata o cookie do geoIP, para obter apenas a sigla
		if(/^[A-Z]{2},[A-Z]{2},\d+,.+,[A-Z]{2}$/.test(this.selecionado)) {
			this.selecionado = this.selecionado.split(',')[4];
		}

		this.BODY = d.getElementsByTagName("body")[0];
		this.wrapper = homeUOL.gId('cabecalhoTempoWrapper');
		this.cidadesUL = homeUOL.gId('cabecalhoTempo').getElementsByTagName('ul')[0];
		this.cidades = this.cidadesUL.getElementsByTagName('li');
		this.botao = homeUOL.gId('cabecalhoTempoMais');
		this.setIcones();
		this.show();
		this.bind();
	},
	setIcones : function(){
		for(var i=0; i<this.cidades.length; i++){
			var a = this.cidades[i].getElementsByTagName('a')[0];
			if(this.cidades[i].getAttribute('estado')){
				var tx = this.cidades[i].getElementsByTagName('a');
				var e  = this.cidades[i].getAttribute('estado');
				var n  = tx[3];

				// remove o C da temperatura
				tx[1].innerHTML = tx[1].innerHTML.replace('C', '');
				tx[2].innerHTML = tx[2].innerHTML.replace('C', '');

				var nome_cidades = {
					"MT" : "Cuiabá",
					"SC" : "Florianópolis",
					"GO" : "Goiânia",
					"PB" : "João Pessoa",
					"AL" : "Maceió",
					"AP" : "Macapá",
					"MA" : "São Luís",
					"SP" : "São Paulo",
					"ES" : "Vitória",
					"PA" : "Belém",
					"DF" : "Brasília"
				}

				if(typeof nome_cidades[e] != "undefined") {
					n.innerHTML = nome_cidades[e] + " - " + e;
				}

				a.className += ' tempo-' + a.getAttribute('icone').replace(/\.gif/g,'');
			}
		}
	},
	show : function(){
		var html = '';
		for(var i=0; i<this.cidades.length; i++){
			if(this.cidades[i].getAttribute('estado') == this.selecionado){
				//this.cidades[i].className += ' hide';
				html = this.cidades[i].innerHTML;
			}else
				this.cidades[i].className = this.cidades[i].className.replace(/hide/g,'')
		}
		this.wrapper.innerHTML = html;
	},
	botaoLayer : function(){
		setTimeout(function(){clearTimeout(homeUOL.cabecalhoTempo.timerFechar);},100)
		if(this.cidadesUL.className.match(/show/g)){
			this.botao.innerHTML = '+';
			this.cidadesUL.className = '';
		}else{
			this.botao.innerHTML = '-';
			this.cidadesUL.className = 'show'
		}
	},
	bind : function(){
		for(var i=0; i<this.cidades.length; i++){
			if(this.cidades[i].getAttribute('estado'))
			homeUOL.events.add(this.cidades[i],'click',(function(uf){
				return function(e){
					homeUOL.events.preventDefault(e);
					homeUOL.cabecalhoTempo.selecionado = uf;
					//homeUOL.setCookie('cabecalhoTempo',uf,365);
					homeUOL.geoIp.definecaoManualPorUF("SA", "BR", uf);
					homeUOL.contarClick('cabecalhoTempo', null, 'uf='+uf.toString().toLowerCase());
					homeUOL.cabecalhoTempo.show();
					homeUOL.cabecalhoTempo.botaoLayer();
				}
			})(this.cidades[i].getAttribute('estado')))
		}
		homeUOL.events.add(this.botao,'click',function(){
			homeUOL.cabecalhoTempo.botaoLayer();
		})
		homeUOL.events.add(this.BODY,'click',function(e){
	  	if (e.srcElement && !e.target) 
	  		e.target = e.srcElement;
			var el = e.target;
			var fechar = true;
			if(el != homeUOL.cabecalhoTempo.BODY && el.parentNode != null){
				while(el.parentNode != homeUOL.cabecalhoTempo.BODY){
					if(el == homeUOL.cabecalhoTempo.cidadesUL)
						fechar = false;
					el = el.parentNode;
				}
			}
			if(fechar && homeUOL.cabecalhoTempo.cidadesUL.className.match(/show/))
				homeUOL.cabecalhoTempo.timerFechar = setTimeout(function(){homeUOL.cabecalhoTempo.botaoLayer();},200);
				
		})
	}
},

setCookie : function (nome,valor,duracao){
  if(/Safari/.test( navigator.userAgent ) === true) {
		valor = escape(valor);
	}
	var de=new Date();
	if(duracao)
		de.setDate(de.getDate() + duracao);
	d.cookie = nome + "=" + valor + (duracao?'; expires=' + de.toUTCString():'') + '; path=/';
},

getCookie : function (nome){
	var re1 = new RegExp(nome+'=','g');
	var re2 = new RegExp('.*?'+nome+'=(.*?)(\;.*?$|$)','g');
	if (d.cookie.match(re1)) {
	  var value = d.cookie.replace(re2,'$1');
		return /Safari/.test( navigator.userAgent ) === true ? unescape(value) : value;
  }
	else
		return null
},

urls : {},
insertClickUOL : function(container){
	var c = container || d;
	var divs=c.getElementsByTagName('div').length;
	var reF='';
	for(var i=0;i<divs;i++){
		var diV=c.getElementsByTagName('div')[i];
		var dId=diV.id;
		// se não foi informado um container, deve casar com um dos divs abaixo.
		// caso o container tenha sido informado, então não precisa checar nada.
		if(!container && dId.match(/^(corpoEsquerda|corpoDireita|menuHorizontal|topo|rodape|mod-preview)$/) || container){
			var lnks=diV.getElementsByTagName('a').length;
			for(var j=0;j<lnks;j++){
				var aObj=diV.getElementsByTagName('a')[j];
				var aLnk=aObj.href.toString();
/*
				reF='home'
					+(dId=='hUOLfooter'||dId=='hUOLfooter2'?'-rodape':'')
					+(dId=='barraUOL'?'-barraSup':'');
				if(aObj.name!='') reF+='-'+(dId=="shop1"||dId=="shop2"?"coluna"+(parseFloat(aObj.name)<7?"Sup":(parseFloat(aObj.name)<18?"Inf1":"Inf2"))+"-of":"")+aObj.name;
		    if(aObj.name.indexOf('hu-home-rotativo') >= 0 ) reF = aObj.name;
*/
				var na = aObj.name.replace(/^home2011-/,'');
				reF = 'home2011' + (na ? '-' + na : '');
				// indexar urls para comentarios
				if((dId == 'corpoEsquerda' || dId == 'mod-preview') && !aObj.innerHTML.match(/<img/))
					this.urls[aLnk.replace(/.*?click\.uol.*?\&u\=/,'')] = aObj;
				if(aLnk.indexOf('http://click.uol')==-1 && aLnk.indexOf('void(')==-1) {
					var inner='';
					if(aObj.innerHTML.match(/\@/g))
						var inner=aObj.innerHTML;
					aObj.href = aLnk.replace(/http(s?):\/\//,'http:\/\/click.uol.com.br/?rf='+reF+'&u=http$1:\/\/');
					if(inner)
						aObj.innerHTML = inner;
				}
/*
				if(aLnk.indexOf('radio.musica.uol.com.br')!=-1&&(aLnk.indexOf('player.htm')!=-1||aLnk.indexOf('abreradio.htm')!=-1||aLnk.indexOf('cdcapa.php')!=-1||aLnk.indexOf('frameset.php')!=-1)){
					aObj.href='javascript:pop("'+aObj.href+'")';
				}
*/
			}
		} 
	}	
},

qtdComentarios : function(d){
	for(var a in d.data){
		var e = this.urls[d.data[a]['url']];
		if(e && d.data[a]['qtd'] && d.data[a]['qtd'] > 0 && /qtdComentarios/.test( e.innerHTML ) === false)
			e.innerHTML += '<span class="qtdComentarios"><span><i class="icoComentarios"></i>' + d.data[a]['qtd'] + '</span></span>';
	}
},

DEshow : function(ad,pos){
	//popup
	if(ad=='1x1' && pos=='11'){
		if(d.cookie.indexOf("POPhomeUOL")==-1 && location.href.indexOf('homeuol')==-1)
			document.cookie="POPhomeUOL=0;domain=.uol.com.br;";
		else
			return;
	}

	if(!this.setPositionBanners){
		var banners = homeUOL.gId('banners');
		var corpo = homeUOL.gId('corpo');
		var rodape = homeUOL.gId('rodape');
		banners.style.top=corpo.offsetTop+'px'
		this.setPositionBanners = setInterval(function(){
			//banners.style.marginTop=((corpo.offsetHeight+rodape.offsetHeight)*-1)+'px'
			banners.style.top=corpo.offsetTop+'px'
		},homeUOL.tempoDEShowPos);
	}

	var area = homeUOL.gId('banner-' + ad + '-' + pos + '-Area');
	var banner = homeUOL.gId('banner-' + ad + '-' + pos);

	if(area && banner){
		if(this.sw >= 1280 || this.sw < 1280 && !ad.match(/200x78|200x446/g)){
			homeUOL.showBanner(ad,pos);
			setInterval(function(){
				homeUOL.showBanner(ad,pos);
			},homeUOL.tempoDEShowPos);
		
			var DEconn=d.body; DEconn.style.behavior='url(#default#clientCaps)'; DEconn=(DEconn.connectionType=='lan')?1:0;
			if((ad=='300x250' && (pos==5 || pos==12)) || ad=='120x36' && pos==6 ){Expble=1;}else{Expble=0;}
		  	d.write('<'+'scr'+'ipt type="text/javascript" src="http://bn.uol.com.br/js.ng/site='+DEsite+'&amp;chan='+DEchan+'&amp;subchan='+DEsubc+'&amp;affiliate='+DEsite+DEchan+'&amp;size='+ad+'&amp;page='+pos+'&amp;conntype='+DEconn+'&amp;expble='+Expble+'&amp;reso='+scw+'x'+sch+'&amp;tile='+DErand+'?"><\/scr'+'ipt>');
		}
	}else if(banner)
		banner.style.display = 'none';

},

showBanner : function(b,p){
	var area = homeUOL.gId('banner-' + b + '-' + p + '-Area');
	var banner = homeUOL.gId('banner-' + b + '-' + p);
	if(area && banner && !banner.className.match(/fixo/g)){
		var top = area.offsetTop;
		var left = area.offsetLeft;
		var e = area;
		while(e.parentNode.id != 'corpo'){
			top += e.parentNode.offsetTop;
			left += e.parentNode.offsetLeft;
			e = e.parentNode;
		}
		banner.style.top = top + 'px';
		banner.style.left = left + 'px';
	}
},

// script para exibir e tratar as ações na barra de
// definição de página inicial para o IE
paginaInicialIEBar : function() {
	var bar = this.gId('paginaInicialIEBar'),
		behavior = this.gId('cabecalhoSuaHome'),
		url = 'http://' + location.host + '/';

	// se não exitir a barra
	if(bar === null || behavior === null) {
		return false;
	}

	// cria o behavior para o IE
	behavior.style.behavior = 'url(#default#homepage)';

	// verifica se usuário tem algum cookie definido
	var grupo = document.cookie.toString().match(/ieHomePage2011\=1/);

	// usuários com cookie '1' (clicou em 'não') ou já é home: não exibie a barra
	if(grupo || behavior.isHomePage(url) === true)
		return false;

	// define o modelo usado
	bar.className     += " paginaInicialIEBarModeloC";
	bar.style.display  = 'block';

	uol_sc.tl(true,"o","pagina inicial-barraie-visualizacao");

	// adiciona eventos nos botões
	var buttons = bar.getElementsByTagName('button'),
		i_buttons = buttons.length,
		button;
	while(i_buttons--) {
		button = buttons[i_buttons];

		this.events.add(button, 'mouseover', (function(_bt) {
			return function() {
				_bt.className += ' over';
			}
		}(button)));

		this.events.add(button, 'mouseout', (function(_bt) {
			return function() {
				_bt.className = _bt.className.replace(' over', '');
			}
		}(button)));

		this.events.add(button, 'click', (function(isSetHomeAction) {
			// define como home (sim)
			if(isSetHomeAction === true) {
				return function() {
					setTimeout(function() { bar.style.display = 'none'; }, 5000);
					//document.cookie = 'ieHomePage2011=1; expires='+( new Date(+new Date()+10*24*60*60*1000).toGMTString() )+';';
					uol_sc.tl(true,"o","pagina inicial-barraie-clique sim");
					homeUOL.defineHomeIE(behavior);
				}
			}
			// fecha o bloco (botão "não")
			else {
				return function() {
					bar.style.display = 'none';
					document.cookie = 'ieHomePage2011=1; expires='+( new Date(+new Date()+10*24*60*60*1000).toGMTString() )+';';
					uol_sc.tl(true,"o","pagina inicial-barraie-clique nao");
				}
			}
		}(/sim/.test(button.className))));
	}
},

// chamada quando o link 'página inicial' é clicado.
// apenas redireciona para a ação específica do navegador.
defineHome : function(e, obj){
	this.events.preventDefault(e);
  if(/Microsoft/.test(navigator.appName)) {
		this.defineHomeIE(obj);
  }else if(/firefox/.test(this.userAgent) && this.gId('paginaInicialFFBar')){
		this.defineHomeFF();
	}else{
		this.contarClick('DefineHome',function(){
		  location.href = obj.href;
		});
	}
},

defineHomeFF : function() {
	var bloco = this.gId('paginaInicialFFBar'),
		body = d.getElementsByTagName("body")[0],
		func_hide = function(ev) {
			bloco.className = '';
			homeUOL.events.del(body, 'click', func_hide);
		};

	this.events.add(body, 'click', func_hide);
	bloco.className = 'show';
	this.contarClick('DefineHomeFF');
},

defineHomeIE : function(obj) {
	var url = 'http://' + location.host + '/';
	this.contarClick('DefineHomeIE');
	obj.style.behavior = 'url(#default#homepage)';
	obj.setHomePage(url);
},

radioUOL : {
	modulo : null,
	init : function(){
		this.modulo = homeUOL.gId('radioUOL');
		this.binds();
	},
	binds : function(){
		var a = this.modulo.getElementsByTagName('a');
		for(var i=0; i<a.length; i++){
			if(a[i].className.match(/popup/))
				homeUOL.events.add(a[i],'click',(function(aElement){
					return function(e){
						homeUOL.events.preventDefault(e);
						window.open(aElement.getAttribute('href'), "Playlist_Radio_UOL", "location=no,scrollbars=no,resizable=yes,toolbar=no,menubar=no,width=315,height=485");
					}
				})(a[i]))
		}
	}
	
},

rotativo : function(){
	homeUOL.scripts.load({url:"http://jsuol.com/c/jquery/jquery.js",check:function(){return window.jQuery},callback:function(){
		homeUOL.scripts.load({url:"http://jsuol.com/c/_template/v1/web/js/lib.rotativo/rotativo.js",check:function(){return window.jQuery().rotativo},callback:function(){
			jQuery('.rotativo').rotativo();
		}});
	}});
},

enquete : function(){
	homeUOL.scripts.load({url:"http://jsuol.com/c/jquery/jquery.js",check:function(){return window.jQuery},callback:function(){
		homeUOL.scripts.load({url:"http://jsuol.com/c/_template/v1/web/js/lib.enquete/enquete.js",check:function(){return window.Lib && window.Lib.Enquete},callback:function(){
			var Enquete = Lib.Enquete,
				Module = Enquete.Module,
				Default = Module.Default,
				SORT_BY_ID = Enquete.SORT_BY_ID,
				SORT_BY_PERCENT = Enquete.SORT_BY_PERCENT;

			var HomeUOL = Module.HomeUOL = {};
			HomeUOL.start = function(modulo) {
				var RE_ID = /id:(\d+)/,
					modulo = modulo[0] || false,
					dom_answers = jQuery(modulo).find('fieldset .answer'),
					arr_answers = [];
		
				if(!modulo)
					return false;
		
				if(!RE_ID.test(modulo.className))
					return false;
				
				var config = {
					'markup'        : modulo[0],
					'txt_votos'     : '%d votos',
					'txt_resultado' : 'Resultado parcial',
					'module'        : 'HomeUOL',
					'sort_result'   : false,
					'id'            : jQuery(modulo).attr('class').match(RE_ID)[1],
					'callback'      : {
						'post_view' : [Lib.Enquete.Plugin.checkSpan],
						'post_vote' : [Lib.Enquete.Plugin.checkSpan]
					}
				}
				
				// obtém os dados das alternativas
				dom_answers.each(function() {
					var item = {};
					item.answer = jQuery(this).find('span').text().replace(/([\t\n])+| +/g, '');
					item.id     = jQuery(this).find('input').attr('value');
					arr_answers.push(item);
				});

				Enquete.register(config.id, {
					'_config'      : config,
					'id'           : config.id,
					'question'     : jQuery(modulo).find('h2').text(),
					'last_request' : null,
					'answers'      : arr_answers
				});
				
				HomeUOL.bind(modulo, config.id);
		
				var type = 'view',
					callback = config.callback['post_' + type];
				
				if(config.callback.post_view) {
					for(var f in callback) {
						if(typeof callback[f] == 'function') {
							callback[f].call(window, Enquete.recover(config.id), type);
						}
					}
				}
			}
			
			/**
			 * Adiciona eventos nos botões e links
			 * @param {Object} modulo DOM do modulo da enquete
			 */
			HomeUOL.bind = function(modulo, enquete_id) {
				// botão votar
				jQuery(modulo).find('button').each(function(index) {
					jQuery(this).unbind('click.vote').bind('click.vote', function() {
						// qual alternativa está selecionada
						var alternative = parseInt(jQuery(modulo).find('input:checked').val());
		
						// verifica se tem campo de captcha
						var captcha_value = jQuery(modulo).find('input[name="tt_user_response"]').val() || null;
						
						// Envia clickuol
						homeUOL.contarClick('corpo-direita-enquete-votar');
						clickCounterOmniture('corpo-direita-enquete-votar');
		
						return Default.vote(enquete_id, alternative, captcha_value);
					});
				});
				
				// ver resultado
				jQuery(modulo).find('a[class="ver-resultado"]').each(function(index) {
					jQuery(this).unbind('click.result').bind('click.result', function(e) {
						Enquete.request('results', { 'id' : enquete_id }, 'Lib.Enquete.Callback.request');
						e.preventDefault();
						return false;
					});
				});
			}

			HomeUOL.Markup = {};
			HomeUOL.Markup.vote = function(enquete_id, json, modulo) {
				var data = Enquete.recover(enquete_id);
				jQuery(modulo).find(".waiting").remove();
		
				// se exige captcha
				if(json.status == 'captcha') {
					// remove botões e captcha antigo
					jQuery(modulo).find('button, .ver-resultado, .total-votos, .captcha').remove();
					
					// adiciona o novo bloco de captcha
					jQuery(modulo).find('.alternatives').after( Default.Markup.captcha(json.id, json.captcha, null, Lib.Enquete.recover(json.id, 'user_vote')) );
		
					// adiciona os eventos
					HomeUOL.bind(modulo, enquete_id);
				}
				
				// se voto foi efetuado com sucesso
				else if(json.status == 'enabled') {
					jQuery(modulo).find(".alternatives").show();
		
					Enquete.recover(json.id, 'answers').sort(SORT_BY_PERCENT);
		
					// adiciona classe de pós voto
					jQuery(modulo).addClass("post-vote");
					
					// remove botão e bloco de captcha
					jQuery(modulo).find('input[type="submit"], .captcha').remove();
					
					// ordena os resultados
					Default.Markup.sort(json.id, Enquete.recover(json.id, 'answers'), true);
					
					// atualiza os itens com a barra de porcentagem e total de votos
					Default.Markup.results(enquete_id, json, modulo);
					
					// adiciona aviso
					Default.Markup.aviso(modulo, Enquete.Messages['msg_votado']);
				}
			}
			
			HomeUOL.Markup.results = Default.Markup.results;

			// inicia a enquete
			Lib.Enquete.Module.HomeUOL.start(jQuery('#boxEnquete .moduloenquete'));
		}});
	}});
},

comunicarErro : {
	init : function(){
		homeUOL.scripts.load({url:"http://noticias.uol.com.br/erros/enviaerro.js",check:function(){return window.EnviarErro},callback:function(){

		window.validaErros = function() {
			df1 = document.formerros; df2 = document.reportar;
			var seuemail = df1.seuemail.value;
			if (df1.seunome.value=="") { alert ("Favor preencher seu nome"); df1.seunome.focus(); }
			else if (seuemail=="") { alert ("Favor preencher seu e-mail"); df1.seuemail.focus(); }
			else if (!seuemail.match(/\w+@\w+\.\w+/)) { alert ("E-mail inválido"); df1.seuemail.focus(); }
			else if (df1.descricao.value=="") { alert ("Favor preencher a descrição"); df1.descricao.focus(); }
			else { 
				df2.seunome.value=df1.seunome.value;
				df2.seuemail.value=df1.seuemail.value;
				df2.obrigado.value=df1.obrigado.value;

				df2.descricao.value=df1.descricao.value + '\nNavegador: ' + homeUOL.userAgent;
				df2.urlmateria.value=location.href;

				//df2.sistema.value=navigator.userAgent;
				var autohide = setTimeout("FullOpacity.hide()", 30000);
				document.getElementById('iframeErros').style.display='block';
				df2.submit();
			}
		}
			EnviarErro();

			homeUOL.events.add(homeUOL.gId('btComunicarErro'),'click',function(e){
				homeUOL.events.preventDefault(e);
				ShowEnviaErro();
			})
		},charset:"ISO-8859-1"});
	}
},

/**
 * Salva um dado no storage no navegador ou no cookie, caso
 * o storage não seja suportado.
 * 
 * Faz a leitura e remove também.
 */
storage : {
	storage : window['localStorage'],

	/**
	 * Salva um item no local storage
	 * @param {String} name Nome do item
	 * @param {String} value Valor do item
	 * @returns {Boolean}
	 */
	save : function(name, value) {
		if(this.storage) {
			this.storage.setItem(name,value);
		}
		else {
			homeUOL.setCookie(name,value,365);
		}
		return value;
	},

	/**
	 * Retorna um item do local storage;
	 * @param {String} name Nome do item
	 * @returns {String}
	 */
	read : function(name) {
		if(this.storage) {
			return this.storage.getItem(name);
		}
		else {
			return homeUOL.getCookie(name);
		}
	},

	/**
	 * Delete um item no local storage
	 * @param {String} name Nome do item
	 * @returns {Boolean}
	 */
	del : function(name) {
		if(this.storage) {
			return this.storage.removeItem(name);
		}
		else {
			return homeUOL.setCookie(name,'',-100);
		}
	}
},

/**
 * Realiza a conexão com o webservice e executa os callbacks
 * de sucesso ou erro.
 */
webservice : {
	// timer para simular timeout do servidor
	timer : null,
	// registra as informações dos requests
	queue : [],
	// url de request par ao webservice
	webservice : 'http://taghome.uol.com.br/?sort=created:desc&format=jsonp&size=%SIZE%&charset=utf-8&jsonp=homeUOL.webservice.callback&fields=titulo,imagem,imagem-credito,url-uol&tags-id=%TAGS%&repository=%REPOSITORY%&publisher=publicadoruol&portal=uol',
	// indica se o webservice está fora do ar
	down : false,
	// timeout para o click
	timeout_click : 5000,
	// registra um request
	// @param {Json} cfg
	//   tags       : {String}   tags de filtro para o request (formato tagservice)
	//   success    : {Function} função de callback em caso de sucesso
	//   error      : {Function} função de callback em caso de erro
	//   size       : {Int}      total de resultados
	//   repository : {String}   repositório para a consulta
	register : function(cfg) {
		// se o serviço estiver fora
		if(this.down === true) {
			return false;
		}

		// adiciona o item na fila de espera
		this.queue.push(cfg);
		// se a fila só tiver ele, já vai pro request
		if(this.queue.length === 1) {
			this.request(cfg);
		}

		// retorna false para travar a ação do usuário
		return true;
	},

	// faz o request para o webservice
	request : function(cfg) {
		var url = this.webservice,
			self = this;

		if(this.down === true) {
			if(typeof cfg.error == 'function') {
				cfg.error.call(cfg.context || homeUOL, cfg);
			}
			return false;
		}

		// troca os parâmetros
		url = url.replace('%TAGS%', cfg.tags);
		url = url.replace('%SIZE%', cfg.size || 2);
		url = url.replace('%REPOSITORY%', cfg.repository || 'news');

		// faz o request
		var info_request = homeUOL.scripts.load( { 'url' : url, 'refresh' : true } );

		// registra um timer para verificar se o request foi realizado com sucesso após
		// um certo periodo de tempo
		this.timer = setTimeout(function() {
			if(typeof cfg.timeout == 'function' && cfg.timeout.apply(homeUOL) === false) {
				self.down = true;
				if(typeof cfg.error == 'function') {
					cfg.error.call(cfg.context || homeUOL, cfg);
				}
			}
		}, this.timeout_click);
	},

	// recebe o json do request e executa o callback registrado
	callback : function(json) {
		clearTimeout(this.timer);
		this.timer = null;

		// obtém os dados do request
		var request = this.queue.shift();
		if(request !== undefined) {
			// se o webservice caiu e existe função callback de erro
			if(this.down === true && typeof request.error == 'function') {
				request.error.call(request.context || homeUOL, request);
			}
			// se o webservice está de pé e existe função callback de sucesso
			else if(this.down === false && typeof request.success == 'function') {
				request.success.call(request.context || homeUOL, json);
			}
		}
		// faz o próximo request
		if(this.queue.length > 0) {
			this.request(this.queue[0].tags);
		}
	}
},

modulosDinamicos : {

	/**
	 * Módulo dinâmico para times de futebol
	 */
	timesfutebol : {
		// total de notícias personalizadas
		size : 2,
	
		// container do módulo de times (o .modulo)
		container : null,
	
		// Nome do storage (ou cookie) onde serão armazenadas as tags e o link do time
		// escolhido pelo usuário.
		storageTags : 'timeFutebolTags',
		storageLink : 'timeFutebolLink',
		storageNome : 'timeFutebolNome',
	
		// Dados armazenados
		tagsDefined : null,
		linkDefined : null,
		timeDefined : null,

		/**
		 * Troca os escudos do time, dependendo da série selecionada
		 * pelo usuário.
		 * @param {Event} e evento click
		 * @param {String} s série que deve ser exibida (A ou B)
		 * @param {DOMObject} el elemento clicado, que deve receber a classe 'selected'
		 */
		serie : function(e, s, el) {
			homeUOL.events.preventDefault(e);
			if(s == "A") {
				// mostra os escudos
				this.elem_srA.className = this.elem_srA.className.replace(/ ?hidden/g, '');
				this.elem_srB.className += " hidden";
			}
			else if(s == "B") {
				// mostra os escudos
				this.elem_srA.className += " hidden";
				this.elem_srB.className = this.elem_srB.className.replace(/ ?hidden/g, '');
			}
	
			if(this.elem_li_series === null) {
				this.elem_li_series = el.parentNode.getElementsByTagName('strong');
			}
			
			var t = this.elem_li_series.length;
			while(t--) {
				this.elem_li_series[t].className = this.elem_li_series[t].className.replace(/ ?selected/g, '');
			}
	
			el.className += " selected";
		},
	
		/**
		 * Verifica se o usuário já escolheu um time e carrega as informações
		 * dele, caso tenha definido.
		 */
		init : function() {
			this.elem_modulo = homeUOL.gId('mod-fut');
			if(this.elem_modulo == null) {
				return false;
			}
	
			this.elem_noticias = homeUOL.gId('mod-fut-not');
			this.elem_srA      = homeUOL.gId('tms-srA-per');
			this.elem_srB      = homeUOL.gId('tms-srB-per');
			this.elem_titulo   = this.elem_modulo.getElementsByTagName("h5")[0];

			// adiciona eventos nos links dos escudos
			var serieA = this.elem_srA.getElementsByTagName('ul')[0].getElementsByTagName('a'),
				total_serieA = serieA.length,
				serieB = this.elem_srB.getElementsByTagName('ul')[0].getElementsByTagName('a'),
				total_serieB = serieB.length;
			while(total_serieA--) {
				var l = serieA[total_serieA];
				l.onclick = function(event) {
					var e = event || window.event;
					//homeUOL.events.preventDefault(e);
					homeUOL.modulosDinamicos.timesfutebol.click(e,this);
				}
			}
			while(total_serieB--) {
				var l = serieB[total_serieB];
				l.onclick = function(event) {
					var e = event || window.event;
					//homeUOL.events.preventDefault(e);
					homeUOL.modulosDinamicos.timesfutebol.click(e,this);
				}
			}

			// links para trocar as séries dos clubes
			this.elem_li_series = null;
	
			this.tagsDefined = homeUOL.storage.read(this.storageTags);
			this.linkDefined = homeUOL.storage.read(this.storageLink);
			this.timeDefined = homeUOL.storage.read(this.storageNome);
	
			// se o usuário definiu um time
			if(this.tagsDefined) {
				this.request(this.tagsDefined, this.linkDefined);
			}
			return true;
		},
	
		/**
		 * Função executada no click do usuário no logo do  time.
		 * 
		 * Deve salvar a escolha do usuário e fazer request para o
		 * webservice.
		 *
		 * @param {DOMObject} obj Objeto DOM do link clicado
		 */
		click : function(e, obj) {
			var link = obj.href,
				tags = obj.className.replace('tag:','');
	
			// guarda as informações do click
			this.tagsDefined = homeUOL.storage.save(this.storageTags, tags);
			this.linkDefined = homeUOL.storage.save(this.storageLink, link.replace(/^http:\/\/click\..+&u=(http(s)?:\/\/+)/, '$1'));
			this.timeDefined = homeUOL.storage.save(this.storageNome, obj.innerHTML);
			// faz o request
			if(this.request(tags, link, true) === true) {
				homeUOL.events.preventDefault(e);
				// click uol
				var path_time = this.linkDefined.match(/\/([\w-]+)\/$/);
				if(path_time) {
					homeUOL.contarClick('futebol-dinamico', null, 'time=' + path_time[1]);
				}
			}
		},

		/**
		 * Faz o request para o webservice.
		 * @param {String} tags Tag para o filtro do time
		 * @param {String} link Link da página do clube
		 * @param {Boolean} cliced Indica se a ação é um click
		 */
		request : function(tags, link, clicked) {
			this.elem_modulo.className += " mod-fut-carregando";
			return homeUOL.webservice.register({
				'context' : homeUOL.modulosDinamicos.timesfutebol,
				'size'    : this.size+3,
				'tags'    : tags,
				'error'   : homeUOL.modulosDinamicos.timesfutebol.error(tags, link, clicked ? 'clicked' : 'loaded'),
				'success' : homeUOL.modulosDinamicos.timesfutebol.show,
				'timeout' : (function(mod) {
					return function() {
						return /futebolCarregando/.test(mod.className) === true;
					}
				}(this.elem_modulo))
			});
		},

		/**
		 * Monta o markup e adiciona no elemento onde o conteúdo deve
		 * aparecer.
		 *
		 * O contexto dessa função é o objeto 'homeUOL'
		 *
		 * @param {Json} data Retorno do webservice
		 */
		show : function(data) {
			var elem = this.elem_noticias,
				noticias = data.docs,
				total = noticias.length,
				not, i, u, markup = '';
	
			// troca o título do bloco para o título do time escolhido
			this.elem_titulo.innerHTML = '<a href="'+this.linkDefined+'" name="vertical-futebol-dinamico">'+this.timeDefined+'</a>';
	
			if(total > 0) {
				for(i = 0, u = 0; u < this.size && i < total; i++) {
					not = noticias[i];
					// só usa o item se ele ainda não está na home
					if(not && typeof homeUOL.urls[not['url-uol']] == 'undefined') {
						markup += '<div class="modulo moduloChamada'+(not['imagem']?' i80x80':'')+'">\
							'+(not['imagem'] ? '<a href="'+not['url-uol']+'" name="vertical-futebol-dinamico"><img src="'+not['imagem'].replace(/_(\d{2,3}x\d{2,3})/, '_80x80')+'" alt="'+not['imagem-credito']+'" title="'+not['imagem-credito']+'" /></a>' : '') +'\
							<h4><a href="'+not['url-uol']+'" name="vertical-futebol-dinamico">'+not['titulo']+'</a></h4>\
						</div>';
	
						u += 1;
					}
				}
			}
			else {
				markup += 'Nenhum conteúdo encontrado';
			}
	
			elem.innerHTML = markup;
	
			// inserie o click uol no módulo
			homeUOL.insertClickUOL(this.elem_modulo);
	
			// remove classe de carregando para de carregado
			this.elem_modulo.className = this.elem_modulo.className.replace(/ ?mod-fut-carregando|mod-fut-personalizado/, ' mod-fut-personalizado');
		},
	
		/**
		 * Retorna a função fallback de request do webservice.
		 * Se o request foi efetuado após um click do usuário, ele será redirecionado
		 * para a página do time.
		 *
		 * Se o request foi um realizado via 'load' da página, não faz nada.
		 *
		 * @param
		 */
		error : function(tags, link, action) {
			if(action == 'clicked') {
				return function() {
					location.href = link;
				}
			}
			else {
				return function() {
					this.elem_modulo.className = this.elem_modulo.className.replace(/ ?mod-fut-carregando/, '');
					if(window.console) {
						//console.log('Servidor down');
						homeUOL.contarClick('fail-vertical-futebol-dinamico');
					}
				}
			}
		},
	
		/**
		 * Remove as notícias e mostra os times para o usuário poder escolher.
		 */
		redefinir : function(e) {
			try {
				homeUOL.events.preventDefault(e);
				homeUOL.storage.del(this.storageTags);
				homeUOL.storage.del(this.storageLink);
				homeUOL.storage.del(this.storageNome);
	
				// remove os blocos de noticia
				this.elem_noticias.innerHTML = '';
				this.elem_titulo.innerHTML   = 'Notícias do seu time';
				
				// exibe os times
				this.elem_modulo.className = this.elem_modulo.className.replace(/ ?mod-fut-carregando|mod-fut-personalizado/g, '') + '';
				return false;
			}catch(e) {
				//console.log(e);
			}
		}
	} // modulosDinamico.futebol

}, // modulosDinamicos

/**
 * Faz o request para o serviço de geoIP e grava o cookie
 * com a localização do usuário.
 */
geoIp : {
	/**
	 * Função callback para depois de obter os dados do geoip
	 * @type Function
	 */
	external_callback : {},

	/**
	 * Siglas dos estados, de acordo com o código.
	 * @type Object (Hash)
	 */
	siglas : {
		"01":"AC",
		"02":"AL",
		"03":"AP",
		"04":"AM",
		"05":"BA",
		"06":"CE",
		"07":"DF",
		"08":"ES",
		"11":"MS",
		"13":"MA",
		"14":"MT",
		"15":"MG",
		"16":"PA",
		"17":"PB",
		"18":"PR",
		"20":"PI",
		"21":"RJ",
		"22":"RN",
		"23":"RS",
		"24":"RO",
		"25":"RR",
		"26":"SC",
		"27":"SP",
		"28":"SE",
		"29":"GO",
		"30":"PE",
		"31":"TO"
	},

	/**
	 * Código dos estados, de acordo com a sigla
	 * @type Object (Hash)
	 */
	codigos : {
		"AC":"01",
		"AL":"02",
		"AP":"03",
		"AM":"04",
		"BA":"05",
		"CE":"06",
		"DF":"07",
		"ES":"08",
		"MS":"11",
		"MA":"13",
		"MT":"14",
		"MG":"15",
		"PA":"16",
		"PB":"17",
		"PR":"18",
		"PI":"20",
		"RJ":"21",
		"RN":"22",
		"RS":"23",
		"RO":"24",
		"RR":"25",
		"SC":"26",
		"SP":"27",
		"SE":"28",
		"GO":"29",
		"PE":"30",
		"TO":"31"
	},

	nomes : {
		"01":"Acre",
		"02":"Alagoas",
		"03":"Amapá",
		"04":"Amazonas",
		"05":"Bahia",
		"06":"Ceará",
		"07":"Distrito Federal",
		"08":"Espírito Santo",
		"11":"Mato Grosso do Sul",
		"13":"Maranhão",
		"14":"Mato Grosso",
		"15":"Minas Gerais",
		"16":"Pará",
		"17":"Paraíba",
		"18":"Paraná",
		"20":"Piauí",
		"21":"Rio de Janeiro",
		"22":"Rio Grande do Norte",
		"23":"Rio Grande do Sul",
		"24":"Rondônia",
		"25":"Roraima",
		"26":"Santa Catarina",
		"27":"São Paulo",
		"28":"Sergipe",
		"29":"Goiás",
		"30":"Pernambuco",
		"31":"Tocantins"
	},

	// tempo de espera para verificar se houve erro no request
	time_timeout : 5000,

	// objeto timeout
	timeout : null,
	
	/**
	 * Faz o request para o sistema de GeoIP.
	 * @param {Function} callback Função opcional para executar após o carregamento das informações
	 */
	request : function(callback, scope) {
		var loading = homeUOL.scripts.load({
			"url"     : "http://geoip.home.uol.com.br/index.jsonp",
			"charset" : "iso-8859-1",
			"refresh" : true
		});

		//console.log(loading);
		if(typeof callback == 'object') {
			this.external_callback = callback;
		}

		// define timeout
		this.timeout = setTimeout((function(loading) {
			return function() {
				// se de fato não foi carregado, executa o callback
				if(loading.isLoaded == false) {
					homeUOL.geoIp.fallback(true);
				}
			}
		}(loading)), this.time_timeout);
	},

	/**
	 * Callback do API do GeoIP. Espera um array com os dados da cidade do usuário.
	 * @param {Array} dados ["SIGLA_DO_CONTINENTE","SIGLA_DO_PAÍS","CÓDIGO_DO_ESTADO","NOME_DA_CIDADE"]
	 */
	callback : function(dados) {
		var cookie_life = 365;

		// Se tiver um registro de timeout indica que foi feito request
		// para o geoip. Portanto o cookie deve ter tempo de vida menor.
		if(this.timeout) {
			cookie_life = 5;
			clearTimeout(this.timeout);
			this.timeout = null;
		}

		if(typeof dados != "undefined" && dados.length == 4 && this.siglas[dados[2]]) {
			// console.log('cookie_life: ' + cookie_life);
			// define o cookie com o código da cidade
			homeUOL.setCookie("geoloc", dados.toString() + "," + this.siglas[dados[2]], cookie_life);
			this.execExternalCallback(dados);
		}
		// se deu algum erro ao obter o geoIp
		// ou se o código do estado não é reconhecido (exterior, por exemplo)
		else {
			homeUOL.geoIp.fallback(false);
		}
	},
	
	/**
	 * Entra em ação se foi retornado dado errado ou se deu timeout.
	 */
	fallback : function(problem) {
		// registra cookie default para SP
		this.definecaoManualPorUF('SA', 'BR', 'SP');

		// registra o erro
		if(problem === true) {
			homeUOL.contarClick('geoip-fallback');
		}
	},

	/**
	 * Executa o callback externo.
	 */
	execExternalCallback : function(dados) {
		var o = this.external_callback;
		if(typeof o == 'object' && typeof o.func == 'function') {
			o.func.apply(o.scope || homeUOL, [dados]);
			delete this.external_callback;
		}
	},
	
	/**
	 * Define o cookie por definição manual.
	 * @param {String} cont Sigla do continente (SA = South america)
	 * @param {String} pais Sigla do país (BR)
	 * @param {String} uf   Sigla do estado
	 */
	definecaoManualPorUF : function(cont, pais, uf) {
		var code = this.codigos[uf],
			nome = this.nomes[code];

		this.callback([cont, pais, code, nome]);
	}
}

}

var d = document;
var	jsRefresh = null;
var setJsRefresh = function(){homeUOL.setJsRefresh()}

//config banners
var DEsite="uolbr";
var DEchan="homeuol";
var DEsubc="capa";
var Expble=0;
var DEt=new Date(); DEt=DEt.getTime(); DErand=Math.floor(DEt*1000*Math.random());
var scw=0,sch=0; if(screen.height){scw=screen.width;sch=screen.height;}

omnitureSearchTerm = function(){}
clickCounterOmniture = function(){}

homeUOL.init();
